# =============================================================================
# Supabase
# =============================================================================
# For local development, these are auto-generated by `pnpm dev`
# For remote Supabase, get these from: https://app.supabase.com/project/_/settings/api

# Web app (Next.js)
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Mobile app (Expo)
EXPO_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Server-side only (never expose to client)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# =============================================================================
# AT Protocol / Bluesky OAuth
# =============================================================================
# Private key for signing OAuth JWTs (PKCS#8 PEM format)
# Generate with: openssl ecparam -name prime256v1 -genkey -noout | openssl pkcs8 -topk8 -nocrypt
# ATPROTO_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"

# Site URL override - REQUIRED for local development with OAuth
# AT Protocol does NOT allow localhost redirect URIs for web apps.
# You must use a tunnel service (ngrok, Cloudflare Tunnel, etc.)
# Example: NEXT_PUBLIC_SITE_URL=https://abc123.ngrok.io
# For Vercel previews, this is auto-detected via VERCEL_URL
# NEXT_PUBLIC_SITE_URL=

# =============================================================================
# Vercel Migration Runner (Vercel deployments only)
# =============================================================================
# Used by apps/web/scripts/run-migrations.mjs to apply migrations during builds.
#
# Provided by Supabase Vercel Integration (automatic):
#   SUPABASE_URL               - Project ref extracted from URL
#   SUPABASE_POSTGRES_PASSWORD - Database password
#
# Add manually to Vercel (Production + Preview environments):
#   SUPABASE_ACCESS_TOKEN - Get from https://supabase.com/dashboard/account/tokens

# =============================================================================
# Resend (Email delivery for beta invites)
# =============================================================================
# Get your API key from: https://resend.com/api-keys
# RESEND_API_KEY=re_xxxxxxxxxxxx

# =============================================================================
# Convex (Legacy - being migrated to Supabase)
# =============================================================================
# CONVEX_URL=https://your-deployment.convex.cloud
# NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud
# CONVEX_DEPLOYMENT=dev:your-deployment

# =============================================================================
# PostHog Analytics
# =============================================================================
# Get from PostHog project settings: https://app.posthog.com/settings/project
# All surfaces point to the same PostHog project — just different prefixes.

# Web app (Next.js)
# NEXT_PUBLIC_POSTHOG_KEY=phc_xxxxxxxxxxxx
# NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# Mobile app (Expo)
# EXPO_PUBLIC_POSTHOG_KEY=phc_xxxxxxxxxxxx
# EXPO_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# Edge Functions (Supabase secrets — set via `supabase secrets set`)
# POSTHOG_API_KEY=phc_xxxxxxxxxxxx
# POSTHOG_HOST=https://us.i.posthog.com
